import{a1 as p,k as f,a2 as v,a3 as S,A as w,a as d,c as r,M as m,j as b,F,a4 as O,a5 as C,a6 as D,L as N,a7 as x,X as L,J as P}from"./index-13243669.js";import{B as A,D as T,m as h}from"./baseApiService-e137e6f4.js";import{N as u}from"./networkState-0824194a.js";import{H as U}from"./input-9599b55f.js";var _=Object.defineProperty,k=Object.getOwnPropertyDescriptor,M=(e,n,a,s)=>{for(var l=s>1?void 0:s?k(n,a):n,i=e.length-1,t;i>=0;i--)(t=e[i])&&(l=(s?t(n,a,l):t(l))||l);return s&&l&&_(n,a,l),l};let g=class extends A{constructor(){const e=f().getNmsUdFormDataUrl();super(e)}async getListOf(e){const n=`${e}.json`;return this.get(n)}};g=M([p()],g);const j=()=>v.get(g),J=async(e,n)=>{const a=await j().getListOf(e);if(a.isSuccess===!1)return{...a,value:[]};const s=a.value.map(n).sort((o,c)=>o.title.localeCompare(c.title)),l=s.map(o=>o.value),i=S().getSubmissions(e).filter(o=>l.includes(o.value)===!1).sort((o,c)=>o.title.localeCompare(c.title));let t=[];return i.length>0&&(s.length>0&&t.push({title:"Your submissions:",disabled:!0,value:"-"}),t=[...t,...i.map(o=>({...o,title:`${o.title} (Pending approval)`,image:o.image??w.fallbackImg})),{title:"",disabled:!0,value:"--"}]),s.length>0&&(i.length>0&&t.push({title:"Approved submissions:",disabled:!0,value:"---"}),t=[...t,...s]),{isSuccess:!0,errorMessage:"",value:t}},B=e=>{const[n,a]=d(u.Loading),[s,l]=d([]);return(async()=>{if(e.optionsPromise==null){a(u.Error);return}a(u.Loading);const t=await e.optionsPromise;if(t.isSuccess===!1){a(u.Error);return}l(t.value),a(u.Success)})(),r(P,{get fallback(){return r(T,{get title(){return e.label},get helpText(){return e.helpText},get selectedValues(){return h(e.value)},get multiple(){return e.multiple},get placeholder(){return e.placeholder},get showValidationMessages(){return e.showValidationMessages},get onChange(){return e.onChange},get validation(){return e.validation},get options(){return h(s())}})},get children(){return[r(m,{get when(){return n()===u.Loading},get children(){return r(b,{get children(){return[r(F,{get children(){return r(U,{get label(){return e.label},get helpText(){return e.helpText}})}}),r(O,{disabled:!0,get children(){return r(C,{get children(){return[r(D,{get children(){return e.placeholder}}),r(N,{}),r(x,{})]}})}})]}})}}),r(m,{get when(){return n()===u.Error},get children(){return r(L,{children:"Something went wrong"})}})]}})};export{B as F,J as e};
